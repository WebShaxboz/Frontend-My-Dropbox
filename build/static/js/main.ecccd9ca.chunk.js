(this["webpackJsonpfirebase-react-auth"]=this["webpackJsonpfirebase-react-auth"]||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(35),l=a.n(c),o=a(0),i=a.n(o),u=a(3),s=a(15),d=a(114),m=a(26),f=a(66),p=(a(87),a(111),a(110),f.a.initializeApp({apiKey:"AIzaSyA-hddie7J-3bSfZygFw3sP0PgXZWQOhNQ",authDomain:"dropbox-ee88c.firebaseapp.com",projectId:"dropbox-ee88c",storageBucket:"dropbox-ee88c.appspot.com",messagingSenderId:"602202076833",appId:"1:602202076833:web:cd17540a05e2e9b5fce2e0",measurementId:"G-3DFFGKD41R"})),b=p.firestore(),E={folders:b.collection("folders"),files:b.collection("files"),formatDoc:function(e){return Object(m.a)({id:e.id},e.data())},getCurrentTimestamp:f.a.firestore.FieldValue.serverTimestamp},h=p.storage(),v=p.auth(),g=(a(89),r.a.createContext());function j(){return Object(n.useContext)(g)}function O(e){var t=e.children,a=Object(n.useState)(),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),d=u[0],m=u[1];Object(n.useEffect)((function(){return v.onAuthStateChanged((function(e){o(e),m(!1)}))}),[]);var f={currentUser:l,login:function(e,t){return v.signInWithEmailAndPassword(e,t)},signup:function(e,t){return v.createUserWithEmailAndPassword(e,t)},logout:function(){return v.signOut()},resetPassword:function(e){return v.sendPasswordResetEmail(e)}};return r.a.createElement("div",{className:"scrolll"},r.a.createElement(g.Provider,{value:f},!d&&t))}var N=a(22),y=a(28);a(90);function F(e){var t=e.children;return r.a.createElement("div",{className:"centered-con"},r.a.createElement("div",{className:"centered-con-item"},t))}a(91);function w(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=j().signup,l=Object(n.useState)(""),o=Object(s.a)(l,2),m=o[0],f=o[1],p=Object(n.useState)(!1),b=Object(s.a)(p,2),E=(b[0],b[1]),h=Object(N.g)();function v(){return(v=Object(u.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",f("Passwords do not match"));case 3:return n.prev=3,f(""),E(!0),n.next=8,c(e.current.value,t.current.value);case 8:h.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),f("Failed to create an account");case 14:E(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"up-container"},r.a.createElement(F,null,r.a.createElement("div",{className:"up-con-item"},r.a.createElement("h3",{className:"up-con-name"},"Sign Up"),m&&r.a.createElement(d.a,{variant:"danger"},m),r.a.createElement("form",{onSubmit:function(e){return v.apply(this,arguments)}},r.a.createElement("input",{className:"up-con-input-email",placeholder:"Enter your email",type:"email",ref:e,required:!0}),r.a.createElement("input",{className:"up-con-input-pasword",placeholder:"Enter your password",type:"password",ref:t,required:!0}),r.a.createElement("label",{className:"up-con-input-txt"},"Password Confirmation"),r.a.createElement("input",{className:"up-con-input-repasword",placeholder:"Confirm your password",type:"password",ref:a,required:!0}),r.a.createElement("button",{className:"up-con-sign"},"Sign Up"))),r.a.createElement("div",{className:"up-con-in"},"Already have an account? ",r.a.createElement(y.b,{to:"/login"},"Log In"))))}a(96);function I(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=j(),o=l.currentUser,m=l.logout,f=Object(N.g)();function p(){return(p=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,m();case 4:f.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"profile-container"},r.a.createElement(F,null,r.a.createElement("div",{className:"profile-con-item"},r.a.createElement("h2",{className:"profile-con-txt"},"Profile"),a&&r.a.createElement(d.a,{variant:"danger"},a),r.a.createElement("p",{className:"profile-con-email"},"Email: ",r.a.createElement("span",null,o.email))),r.a.createElement("button",{className:"profile-con-out",onClick:function(){return p.apply(this,arguments)}},"Log Out")))}var x=a(73),S=a.n(x);a(97);function k(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=j().login,c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(s.a)(f,2),b=p[0],E=p[1],h=Object(N.g)();function v(){return(v=Object(u.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,m(""),E(!0),n.next=6,a(e.current.value,t.current.value);case 6:h.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),m("Failed to log in");case 12:E(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"login-container"},r.a.createElement(F,null,r.a.createElement("div",null,r.a.createElement("div",{className:"login-con-item"},r.a.createElement("img",{className:"login-con-img",src:S.a,alt:""}),r.a.createElement("h2",{className:"login-con-names"},"Log In"),o&&r.a.createElement(d.a,{variant:"danger"},o),r.a.createElement("form",{onSubmit:function(e){return v.apply(this,arguments)}},r.a.createElement("div",{className:"login-con-email-item",id:"email"},r.a.createElement("input",{className:"login-con-email",type:"email",placeholder:"Email",ref:e,required:!0})),r.a.createElement("div",{className:"login-con-email-item",id:"password"},r.a.createElement("input",{className:"login-con-email",type:"password",placeholder:"Password",ref:t,required:!0})),r.a.createElement("button",{disabled:b,className:"login-con-button"},"Log In")),r.a.createElement("div",null),r.a.createElement("p",{className:"login-con-up"},"Need an account? ",r.a.createElement(y.b,{to:"/signup"},"Sign Up"))))))}var C=a(79);a(98);function P(e){var t=e.component,a=Object(C.a)(e,["component"]),n=j().currentUser;return r.a.createElement(N.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(N.a,{to:"/login"})}}))}var D="select-folder",U="update-folder",A="set-child-folders",R="set-child-files",q={name:"Folders",id:null,path:[]};function L(e,t){var a=t.type,n=t.payload;switch(a){case D:return{folderId:n.folderId,folder:n.folder,childFiles:[],childFolders:[]};case U:return Object(m.a)(Object(m.a)({},e),{},{folder:n.folder});case A:return Object(m.a)(Object(m.a)({},e),{},{childFolders:n.childFolders});case R:return Object(m.a)(Object(m.a)({},e),{},{childFiles:n.childFiles});default:return e}}var T=a(19),B=a(116),G=a(117),J=a(37),W=a(38);a(101);function z(e){var t=e.currentFolder,a=Object(n.useState)(!1),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),d=u[0],m=u[1],f=j().currentUser;function p(){o(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){o(!0)},className:"addFolder-container"},r.a.createElement(J.a,{icon:W.d,className:"addFolder-icon"})),r.a.createElement(B.a,{show:l,onHide:p},r.a.createElement(G.a,{className:"addFolder-alert",onSubmit:function(e){if(e.preventDefault(),null!=t){var a=Object(T.a)(t.path);t!==q&&a.push({name:t.name,id:t.id}),E.folders.add({name:d,parentId:t.id,userId:f.uid,path:a,createdAt:E.getCurrentTimestamp()}),m(""),p()}}},r.a.createElement("div",null,r.a.createElement(G.a.Group,{className:"adFolder-input-name"},r.a.createElement(G.a.Label,null,"Folder Name"),r.a.createElement(G.a.Control,{type:"text",required:!0,value:d,onChange:function(e){return m(e.target.value)}}))),r.a.createElement(B.a.Footer,{className:"addFolder-alert-footer"},r.a.createElement("button",{className:"addFolder-close-btn",onClick:p},"Close"),r.a.createElement("button",{type:"submit"},"Add Folder")))))}var K=a(118);a(103);function Q(e){var t=e.currentFolder,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],i=c[1],u=j().currentUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"addFile-container"},r.a.createElement(J.a,{icon:W.b,className:"addFile-icon"}),r.a.createElement("input",{type:"file",onChange:function(e){var a=e.target.files[0];if(null!=t&&null!=a){var n=Object(K.a)();i((function(e){return[].concat(Object(T.a)(e),[{id:n,name:a.name,progress:0,error:!1}])}));var r=t===q?"".concat(t.path.join("/"),"/").concat(a.name):"".concat(t.path.join("/"),"/").concat(t.name,"/").concat(a.name),c=h.ref("/files/".concat(u.uid,"/").concat(r)).put(a);c.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes;i((function(e){return e.map((function(e){return e.id===n?Object(m.a)(Object(m.a)({},e),{},{progress:t}):e}))}))}),(function(){i((function(e){return e.map((function(e){return e.id===n?Object(m.a)(Object(m.a)({},e),{},{error:!0}):e}))}))}),(function(){i((function(e){return e.filter((function(e){return e.id!==n}))})),c.snapshot.ref.getDownloadURL().then((function(e){E.files.where("name","==",a.name).where("userId","==",u.uid).where("folderId","==",t.id).get().then((function(n){var r=n.docs[0];r?r.ref.update({url:e}):E.files.add({url:e,name:a.name,createdAt:E.getCurrentTimestamp(),folderId:t.id,userId:u.uid})}))}))}))}},className:"addFile-input"})),o.length>0&&l.a.createPortal(r.a.createElement("div",{className:"addFile-upload"},o.map((function(e){return r.a.createElement("ul",{key:e.id,onClose:function(){i((function(t){return t.filter((function(t){return t.id!==e.id}))}))}},r.a.createElement("li",{closeButton:e.error},e.name),r.a.createElement("div",null,r.a.createElement("div",{animated:!e.error,variant:e.error?"danger":"primary",now:e.error?100:100*e.progress,label:e.error?"Error":"".concat(Math.round(100*e.progress),"%")})))}))),document.body))}var Z=a(115);a(104);function H(e){var t=e.folder;return r.a.createElement(Z.a,{to:{pathname:"/folder/".concat(t.id),state:{folder:t}},id:"folder-container",as:y.b},r.a.createElement(J.a,{icon:W.c}),t.name)}a(105);function M(e){var t=e.file,a=document.getElementsByClassName("file-container");return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"file-container"},r.a.createElement("button",{className:"file-con-btn",onClick:function(){navigator.clipboard.writeText(t.url)}},"copylink"),r.a.createElement("a",{href:t.url,className:"file-container-link"},r.a.createElement(J.a,{icon:W.a}),t.name),r.a.createElement("button",{className:"file-del-btn",onClick:function(){a[0].remove("file-container")}},r.a.createElement(J.a,{icon:W.e}))))}a(106),a(107);function V(){return r.a.createElement("div",{className:"navbar-container"},r.a.createElement(y.b,{to:"/",className:"navbar-con-link"},"Dropbox"),r.a.createElement(y.b,{to:"/user",className:"navbar-con-profil"},"Profile"))}function X(){var e=Object(N.i)().folderId,t=Object(N.h)().state,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(n.useReducer)(L,{folderId:e,folder:t,childFolders:[],childFiles:[]}),r=Object(s.a)(a,2),c=r[0],l=r[1],o=j(),i=o.currentUser;return Object(n.useEffect)((function(){l({type:D,payload:{folderId:e,folder:t}})}),[e,t]),Object(n.useEffect)((function(){if(null==e)return l({type:U,payload:{folder:q}});E.folders.doc(e).get().then((function(e){l({type:U,payload:{folder:E.formatDoc(e)}})})).catch((function(){l({type:U,payload:{folder:q}})}))}),[e]),Object(n.useEffect)((function(){return E.folders.where("parentId","==",e).where("userId","==",i.uid).onSnapshot((function(e){l({type:A,payload:{childFolders:e.docs.map(E.formatDoc)}})}))}),[e,i]),Object(n.useEffect)((function(){return E.files.where("folderId","==",e).where("userId","==",i.uid).onSnapshot((function(e){l({type:R,payload:{childFiles:e.docs.map(E.formatDoc)}})}))}),[e,i]),c}(e,(void 0===t?{}:t).folder),c=a.folder,l=a.childFolders,o=a.childFiles;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("div",null,r.a.createElement("div",{className:"dashboard-container"},r.a.createElement(z,{currentFolder:c}),r.a.createElement(Q,{currentFolder:c})),l.length>0&&r.a.createElement("div",{className:"dashboard-folder-container"},l.map((function(e){return r.a.createElement("div",{key:e.id,className:"dashboard-folder"},r.a.createElement(H,{folder:e}))}))),l.length>0&&o.length>0&&r.a.createElement("hr",null),o.length>0&&r.a.createElement("div",{className:"dashboard-file-container"},o.map((function(e){return r.a.createElement("div",{key:e.id,className:"dashboard-file"},r.a.createElement(M,{file:e}))})))))}var _=function(){return r.a.createElement(y.a,null,r.a.createElement(O,null,r.a.createElement(N.d,null,r.a.createElement(P,{exact:!0,path:"/",component:X}),r.a.createElement(P,{exact:!0,path:"/folder/:folderId",component:X}),r.a.createElement(P,{path:"/user",component:I}),r.a.createElement(N.b,{path:"/signup",component:w}),r.a.createElement(N.b,{path:"/login",component:k}))))};a(108);l.a.render(r.a.createElement(_,null),document.getElementById("root"))},73:function(e,t,a){e.exports=a.p+"static/media/dropbox.95c16dfc.png"},81:function(e,t,a){e.exports=a(109)},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.ecccd9ca.chunk.js.map